<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="https://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="shortcut icon" type="image/png"
	th:href="@{/dist/img/OMSLOGO.png}" />
<title sec:authentication="principal.ermTitle"></title>
<!-- Tell the browser to be responsive to screen width -->
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport">
<!-- Font Awesome -->

<!-- Font Awesome Icons -->
<link rel="stylesheet"
	th:href="@{/plugins/fontawesome-free/css/all.min.css}">
<!-- overlayScrollbars -->
<link rel="stylesheet"
	th:href="@{/plugins/overlayScrollbars/css/OverlayScrollbars.min.css}">
<!-- Select2 -->
<link rel="stylesheet" th:href="@{/plugins/select2/css/select2.min.css}">
<!-- Toastr -->
<link rel="stylesheet" th:href="@{/plugins/toastr/toastr.min.css}">
<!-- daterange picker -->
<link rel="stylesheet"
	th:href="@{/plugins/daterangepicker/daterangepicker.css}">
<!-- Tempusdominus Bootstrap 4 -->
<link rel="stylesheet"
	th:href="@{/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css}">
<!-- Theme style -->
<link rel="stylesheet" th:href="@{/dist/css/adminlte.min.css}">

<!-- DataTables -->
<link rel="stylesheet"
	th:href="@{/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css}">
<link rel="stylesheet"
	th:href="@{/plugins/datatables-responsive/css/responsive.bootstrap4.min.css}">

<link rel="stylesheet"
	th:href="@{/plugins/datatables-buttons/css/buttons.bootstrap4.min.css}">



<style>
body {
	margin: 0;
	font-family: "Source Sans Pro", -apple-system, BlinkMacSystemFont,
		"Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif,
		"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
	font-size: .875rem !important;
	font-weight: 400;
	line-height: 1.5;
	color: #212529;
	text-align: left;
	background-color: #fff;
}

header {
	width: 100%;
	padding: 10px 0 0 15px;
}

.login-box, .register-box {
	width: 80%;
	margin: 0px auto;
}

#load {
	position: fixed;
	left: 0px;
	top: 0px;
	width: 100%;
	height: 100%;
	z-index: 9999;
	background: url(../aml-v4/dist/img/loader.gif) center no-repeat #fff;
	opacity: 1;
}

.content {
	display: flex;
	width: 100%;
	margin: 10px auto;
}

.canvas {
	width: 100%;
	object-fit: contain;
}

.loginfooter {
	bottom: 0;
	position: fixed;
	background: white;
	border-top: 1px solid #dee2e6;
	color: #869099;
	width: 100%;
	display: inline-flex;
	padding: 5px 0 5px 0;
}

.beforefooter {
	left: 10px;
	bottom: 7%;
	position: fixed;
	width: 30%;
	display: inline-flex;
	text-align: right;
	font-size: medium;
	float: right;
	border: 1px outset black;
	background-color: lightblue;
	height: 32px;
	box-shadow: 1px 1px 10px 10px lightblue;
}

.float-right {
	float: right !important;
	text-align: end;
	padding: 0 10px 0px 0px;
}

@media ( min-width : 576px) {
	.card-columns {
		column-count: 3;
	}
}

@media ( min-width : 768px) {
	.card-columns {
		column-count: 3;
	}
}

@media ( min-width : 992px) {
	.card-columns {
		column-count: 4;
	}
}

@media ( min-width : 1200px) {
	.card-columns {
		column-count: 5;
	}
}

.thHead {
	background-color: #4fa9a7 !important;
	white-space: nowrap;
	text-align: center;
	font-weight: bold;
}

.text-Capitalize {
	text-transform: capitalize !important;
}

.test {
	border-left-color: #117a8b;
	border-right-color: #117a8b;
	border-top-color: #117a8b;
	border-bottom-color: #117a8b;
}
</style>
</head>
<div id="load"></div>

<body
	style="background: url(dist/img/photo-2.png); background-size: cover;">
	<div th:insert="/header::roleHeader" style="width: 100%"></div>
	<div class="content" th:if="${zonalFlg eq true or regionalFlg eq true}">

		<div class="container-fluid">
			<form autocomplete="off" role="form" method="post"
				th:action="@{/closeCountAction}" id="closeCountForm">
				<input type="hidden" id="encryptedJsonEdit" name="encryptedJson" />
			</form>
			<form autocomplete="off" role="form" method="post"
				th:action="@{/viewVigilanceReport}" id="vigilanceDashboard">
				<input type="hidden" id="encryptedJsonVigilance"
					name="encryptedJson" />
			</form>
			<input type="hidden" id="piChartData" name="piChartData"
				th:value="${verticalPiCountList}" /> <input type="hidden"
				id="trendGraphChart" name="trendGraphChart"
				th:value="${verticalTrendCountList}" /><input type="hidden"
				id="branchPieList" name="branchPieList" th:value="${branchPieList}" />
			<input type="hidden" id="ageWisePieChartData"
				name="ageWisePieChartData" th:value="${ageWisePieChart}" /> <input
				type="hidden" id="newPriorityList" name="newPriorityList"
				th:value="${zoneCount.newPriorityList}" /> <input type="hidden"
				id="newClassificationGraphList" name="newClassificationGraphList"
				th:value="${zoneCount.newClassificationGraphList}" /><input
				type="hidden" id="zomBranchFlg" name="zomBranchFlg"
				th:value="${zomFlg}" /><input type="hidden" id="officeType"
				th:value="${user.omsOfficeType}" />


			<div class="row">
				<div class="col-sm-12">
					<div class="card card-secondary card-outline verticalWindowCount">

						<div class="card-body">
							<!-- Info boxes -->
							<div class="row"
								th:if="${regionalFlg eq true or zonalFlg eq true}">
								&nbsp;&nbsp;

								<button type="button" id="myVertBtn"
									th:if="${user.omsOfficeType eq 'ZONE' or user.omsOfficeType eq 'REGION'}"
									class="btn btn-sm btn-warning text-white verticalBtn">Staff
									& OBST Monitoring</button>
								&nbsp;&nbsp; <a type="button" id="otherVertBtn"
									th:href="@{/viewDashboard}"
									th:if="${user.omsOfficeType eq 'ZONE'}"
									class="btn btn-sm btn-success verticalBtn">Region
									Monitoring</a><a type="button" id="otherVertBtn"
									th:href="@{/viewDashboard}"
									th:if="${user.omsOfficeType eq 'REGION'}"
									class="btn btn-sm btn-success verticalBtn">Branch
									Monitoring</a>&nbsp;&nbsp;

								<div th:if="${systemAdmin != null or hoAdmin != null}">
									<a th:if="${hoAdmin eq 'NA' and systemAdmin != 'NA'}"
										type="button" th:id="${'SA-'+ systemAdmin}"
										class="btn btn-sm btn-primary TMroleNameDiv">&nbsp; System
										Admin</a> <a th:if="${hoAdmin != 'NA' and systemAdmin eq 'NA'}"
										type="button" th:id="${'SA-'+hoAdmin}"
										class="btn btn-sm btn-primary TMroleNameDiv">&nbsp; System
										Admin</a>
								</div>
								<a type="button" id="verticalBtnVigilance"
									th:if="${user.omsOfficeType eq 'CENTRAL' and user.userPosition eq 'VGD Officer' or user.userPosition eq 'VGD Checker' and user.branchId eq '098'}"
									class="btn btn-sm btn-success verticalBtnVigilance">Vigilance
									Zone Monitoring</a>&nbsp;&nbsp;
							</div>
							<br>
							<div class="row">
								<div class="col-sm-12">
									<!-- Widget: user widget style 2 -->
									<div class="card card-secondary ">

										<div class="card-header text-sm">
											<h3 class="card-title">
												<span class="text-bold ">Exception Summary</span>
											</h3>
										</div>
										<div class="row col-sm-12">
											<div class="card-body table-responsive-sm col-sm-8">

												<form autocomplete="off" role="form" method="post"
													th:action="@{/exportExcelMyVertical}"
													id="exportExcelMyVerticalData"
													th:object="${encryptedRequest}">
													<input type="hidden" id="encryptedJsonExportData"
														name="encryptedJson" />
													<button class="btn btn-secondary buttons-excel m-1 p-1"
														aria-controls="exportRulePriorityReportExcelData"
														style="margin-right: 5px; background-color: #006400; float: right;"
														type="button">
														<span class="exportExcelRulePriorityMV"
															title="Export To Excel" id="exportExcelRulePriorityMV">
															<i class="fas fa-file-excel"></i>&nbsp;&nbsp;Export
														</span>
													</button>
												</form>


												<table
													class="table table-head-fixed table-bordered table-striped table-hover display compact"
													id="roleValueTable">
													<thead>
														<tr>
															<th class="thHead text-bold" rowspan="2">Vertical</th>
															<th colspan="3" class="thHead text-bold">Open</th>
															<th scope="col" class="thHead text-bold" rowspan="2">Pending
																For Verification</th>
															<th scope="col" class="thHead text-bold" rowspan="2">Close</th>
														</tr>
														<tr>
															<th class="thHead text-bold">< 30 Days</th>
															<th class="thHead text-bold">>= 30 & <= 45 Days</th>
															<th class="thHead text-bold">> 45 Days</th>
														</tr>
													</thead>
													<tbody id="tbodyVg">
														<tr th:each="roleVertical : ${finalRoleList}">
															<td
																th:text="${roleVertical.verticalName+' ('+subVerticalHeader+')'}"></td>
															<td><a th:if="${roleVertical.firstAlertCnt != 0}"
																th:id="${roleVertical.vertical.replace(' ','_')+'-'+roleVertical.roleOfficer+'-'+'M'+'-'+'F'}"
																class="btn btn-sm TMroleNameDiv"> <span
																	class="badge text-white"
																	style="background-color: #85E123"
																	th:text="${roleVertical.firstAlertCnt}"> </span>
															</a> <a th:if="${roleVertical.firstAlertCnt == 0}"
																class="btn btn-sm disabled"> <span
																	class="badge text-white"
																	style="background-color: #85E123"
																	th:text="${roleVertical.firstAlertCnt}"> </span>
															</a></td>
															<td><a th:if="${roleVertical.secondAlertCnt != 0}"
																th:id="${roleVertical.vertical.replace(' ','_')+'-'+roleVertical.roleOfficer+'-'+'M'+'-'+'S'}"
																class="btn btn-sm TMroleNameDiv"> <span
																	class="badge text-white"
																	style="background-color: #ECC516"
																	th:text="${roleVertical.secondAlertCnt}"> </span>
															</a> <a th:if="${roleVertical.secondAlertCnt == 0}"
																class="btn btn-sm disabled"> <span
																	class="badge text-white"
																	th:text="${roleVertical.secondAlertCnt}"
																	style="background-color: #ECC516"> </span>
															</a></td>
															<td><a th:if="${roleVertical.thirdAlertCnt != 0}"
																th:id="${roleVertical.vertical.replace(' ','_')+'-'+roleVertical.roleOfficer+'-'+'M'+'-'+'T'}"
																class="btn btn-sm TMroleNameDiv"> <span
																	class="badge text-white"
																	style="background-color: #E14023"
																	th:text="${roleVertical.thirdAlertCnt}"> </span>
															</a> <a th:if="${roleVertical.thirdAlertCnt == 0}"
																class="btn btn-sm disabled"> <span
																	class="badge text-white"
																	style="background-color: #E14023"
																	th:text="${roleVertical.thirdAlertCnt}"> </span>
															</a></td>
															<!-- <td><a th:if="${roleVertical.alertCount != 0}"
																th:id="${roleVertical.vertical.replace(' ','_')+'-'+roleVertical.roleOfficer+'-'+'M'+'-'+'A'}"
																class="btn btn-sm TMroleNameDiv"> <span
																	class="badge text-white"
																	style="background-color: #FF0000"
																	th:text="${roleVertical.alertCount}"> </span>
															</a> <a th:if="${roleVertical.alertCount == 0}"
																class="btn btn-sm disabled"> <span
																	class="badge text-white"
																	style="background-color: #FF0000"
																	th:text="${roleVertical.alertCount}"> </span>
															</a></td> -->
															<td><a
																th:if="${roleVertical.escaletedCount != 0 and roleVertical.roleChecker != null }"
																th:id="${roleVertical.vertical.replace(' ','_')+'-'+roleVertical.roleChecker+'-'+'M'+'-'+'A'}"
																class="btn btn-sm TMroleNameDiv"> <span
																	class="badge text-white"
																	style="background-color: #FFBF00"
																	th:text="${roleVertical.escaletedCount}"> </span>
															</a> <a data-toggle="tooltip"
																title="You Don't Have Checker Access,Please Contact System Admin"
																th:if="${roleVertical.escaletedCount != 0 and roleVertical.roleChecker == null }"
																class="btn btn-sm TMroleNameDiv"> <span
																	class="badge text-white"
																	style="background-color: #FFBF00"
																	th:text="${roleVertical.escaletedCount}"> </span>
															</a> <a th:if="${roleVertical.escaletedCount == 0}"
																th:id="${roleVertical.vertical.replace(' ','_')+'-'+roleVertical.roleChecker+'-'+'M'+'-'+'A'}"
																class="btn btn-sm disabled"> <span
																	class="badge text-white"
																	style="background-color: #FFBF00"
																	th:text="${roleVertical.escaletedCount}"> </span>
															</a></td>
															<td><a type="button"
																th:id="${roleVertical.vertical}"
																th:if="${roleVertical.closeAlertCount != 0}"
																class="btn btn-sm closeCount"> <span
																	class="badge text-white"
																	style="background-color: #28A745"
																	th:text="${roleVertical.closeAlertCount}"> </span>
															</a><a type="button" th:id="${roleVertical.vertical}"
																th:if="${roleVertical.closeAlertCount == 0}"
																class="btn btn-sm disabled"> <span
																	class="badge text-white"
																	style="background-color: #28A745"
																	th:text="${roleVertical.closeAlertCount}"> </span>
															</a></td>
														</tr>
													</tbody>
												</table>
												<!-- /.row -->
											</div>
											<div class="col-sm-4 myRegion">
												<!-- Widget: user widget style 2 -->
												<div class="card card-info">
													<div class="card-body" id="ageWisePieChartDiv">
														<div class="col-sm-12">
															<canvas id="ageWisePieChart"
																style="min-height: 200px; height: 290px; max-height: 290px; max-width: 100%;"></canvas>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-12">

									<div class="card card-info card-outline mt-3"
										th:if="${auditFlg eq true}">
										<div class="card-body">
											<!-- New date added -->

											<div class="row">
												<div class="col-sm-2"></div>
												<div class="col-sm-6 mt-3 pl-3">
													<div class="form-group row">
														<label class="col-5">Select Date Range For Search
															<code>*</code>
														</label>
														<!-- Date range
															/.form group -->
														<div class="input-group date" data-target-input="nearest">
															<input type="text"
																class="form-control col-6 datetimepicker-input"
																placeholder="Start Date" name="startDate" id="startDate"
																data-target="#startDate" onkeydown="return false" />
															<div class="input-group-append" data-target="#startDate"
																data-toggle="datetimepicker">
																<div class="input-group-text">
																	<em class="far fa-calendar-alt"></em>
																</div>
															</div>
															&nbsp;&nbsp;&nbsp; <input type="text"
																class="form-control col-6 datetimepicker-input"
																placeholder="End Date" name="endDate" id="endDate"
																data-target="#endDate" onkeydown="return false" />
															<div class="input-group-append" data-target="#endDate"
																data-toggle="datetimepicker">
																<div class="input-group-text">
																	<em class="far fa-calendar-alt"></em>
																</div>

															</div>


														</div>
													</div>
												</div>
												<div class="col-sm-2 mt-4" th:if="${auditFlg eq true}">
													<button type="button" id="fetchDataBtn"
														class="btn btn-block btn-outline-primary mt-4 fetchDataBtn"
														name="fetchDataBtn">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-4" th:if="${zonalFlg eq true}">
													<button type="button" id="fetchDataBtnReg"
														class="btn btn-block btn-outline-primary mt-4 fetchDataBtnReg"
														name="fetchDataBtnReg">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-4" th:if="${regionalFlg eq true}">
													<button type="button" id="fetchDataBtnBranch"
														class="btn btn-block btn-outline-primary mt-4 fetchDataBtnBranch"
														name="fetchDataBtnBranch">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-4" th:if="${branchFlg eq true}">
													<button type="button" id="fetchDataBtnRule"
														class="btn btn-block btn-outline-primary mt-4 fetchDataBtnRule"
														name="fetchDataBtnRule">Fetch Report</button>
												</div>
											</div>

											<!-- New date added -->
											<div class="row">
												<div class="col-sm-2"></div>
												<div class="col-sm-8 mt-3 pl-3">
													<canvas id="visitors-chart" class="canvas" height="300"></canvas>
												</div>
											</div>

											<div class="row">
												<div class="col-sm-12 mt-3 pl-3">
													<table
														class="table table-bordered table-striped zoneWiseReportTable"
														id="zoneWiseReportTable" border="1">

														<thead>
															<tr>
																<th scope="col" class="thHead text-bold text-white">Zone
																	Name</th>
																<th scope="col" class="thHead text-bold text-white">Open
																	Alert Count</th>
																<th scope="col" class="thHead text-bold text-white">Close
																	Alert Count</th>
																<th scope="col" class="thHead text-bold text-white">Pending
																	For Verification Count</th>
																<th scope="col" class="thHead text-bold text-white">Total
																	Alert Count</th>

															</tr>
														</thead>
														<tbody id="zoneWiseCountBody">
															<tr
																th:each="zoneAlertCount:${zoneCount.zoneAlertCountList}">
																<td class="text-capitalize"
																	th:text="${zoneAlertCount.zoneName}"></td>
																<td th:text="${zoneAlertCount.openCount}"></td>
																<td th:text="${zoneAlertCount.closeCount}"></td>
																<td th:text="${zoneAlertCount.escalateCount}"></td>
																<td
																	class="text-center text-bold text-blue regionWiseCount"
																	th:id="'zoneName-'+${zoneAlertCount.zoneName}"
																	th:name="zoneName"><a href="#"
																	th:text="${zoneAlertCount.totalCount}"> </a></td>
															</tr>


														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
									<div class="card card-info card-outline mt-3" id="regionTable"
										th:if="${zonalFlg eq true}">
										<div class="card-header text-sm" id="regionTablePie">
											<h3 class="card-title">
												Zone Name - <span class="text-capitalize"
													th:text="${zoneCount.zoneId}" id="zoneId2"></span>
											</h3>
										</div>
										<div class="card-body">

											<!-- New date added -->

											<div class="row">
												<div class="col-sm-2"></div>
												<div class="col-sm-6 mt-3 pl-3">
													<div class="form-group row">
														<label class="col-5">Select Date Range For Search
															<code>*</code>
														</label>
														<div class="input-group date" data-target-input="nearest">
															<input type="text"
																class="form-control col-6 datetimepicker-input"
																placeholder="Start Date" name="startDate" id="startDate"
																data-target="#startDate" onkeydown="return false" />
															<div class="input-group-append" data-target="#startDate"
																data-toggle="datetimepicker">
																<div class="input-group-text">
																	<em class="far fa-calendar-alt"></em>
																</div>
															</div>
															&nbsp;&nbsp;&nbsp; <input type="text"
																class="form-control col-6 datetimepicker-input"
																placeholder="End Date" name="endDate" id="endDate"
																data-target="#endDate" onkeydown="return false" />
															<div class="input-group-append" data-target="#endDate"
																data-toggle="datetimepicker">
																<div class="input-group-text">
																	<em class="far fa-calendar-alt"></em>
																</div>

															</div>


														</div>
													</div>
												</div>
												<div class="col-sm-2 mt-4" th:if="${auditFlg eq true}">
													<button type="button" id="fetchDataBtn"
														class="btn btn-block btn-outline-primary mt-4 fetchDataBtn"
														name="fetchDataBtn">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-4" th:if="${zonalFlg eq true}">
													<button type="button" id="fetchDataBtnReg"
														class="btn btn-block btn-outline-primary mt-4 fetchDataBtnReg"
														name="fetchDataBtnReg">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-4" th:if="${regionalFlg eq true}">
													<button type="button" id="fetchDataBtnBranch"
														class="btn btn-block btn-outline-primary mt-4 fetchDataBtnBranch"
														name="fetchDataBtnBranch">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-4" th:if="${branchFlg eq true}">
													<button type="button" id="fetchDataBtnRule"
														class="btn btn-block btn-outline-primary mt-4 fetchDataBtnRule"
														name="fetchDataBtnRule">Fetch Report</button>
												</div>
											</div>

											<!-- New date added -->
											<hr>
											<div class="row">
												<div class="col-sm-4 mt-8 pl-3">
													<canvas id="pieChart2"
														style="min-height: 250px; height: 300px; max-height: 300px; max-width: 100%;"></canvas>
												</div>
												<div class="col-sm-8 mt-3 pl-3">
													<table
														class="table table-bordered table-striped regionWiseReportTable"
														id="regionWiseReportTable" border="1">

														<thead>
															<tr>
																<th class="thHead text-bold ">Region Name</th>
																<th class="thHead text-bold ">Open Alert Count</th>
																<th class="thHead text-bold ">Close Alert Count</th>
																<th class="thHead text-bold ">Verification Count</th>
																<th class="thHead text-bold ">Total Alert Count</th>

															</tr>
														</thead>
														<tbody id="regionWiseCountBody">
															<tr
																th:each="zoneAlertCount:${zoneCount.regionAlertCountList}">
																<td class="text-capitalize "
																	th:text="${zoneAlertCount.regionName}"></td>
																<td th:text="${zoneAlertCount.openCount}"
																	class="text-bold text-red"></td>
																<td th:text="${zoneAlertCount.closeCount}"
																	class="text-bold text-green"></td>
																<td th:text="${zoneAlertCount.escalateCount}"
																	class="text-bold text-yellow"></td>
																<td
																	class="text-center text-bold text-blue branchAlertCount"
																	th:id="'regionName-'+${zoneAlertCount.regionName}"
																	th:name="regionName"><a href="#"
																	class="badge badge-primary"
																	th:text="${zoneAlertCount.totalCount}"> </a></td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
									<div class="card card-info card-outline mt-3" id="regionTable"
										style="display: none">
										<div class="card-header text-sm">
											<h3 class="card-title">
												Zone Name - <span class="text-capitalize" id="zoneId"></span>
											</h3>
										</div>
										<div class="card-body">

											<div class="row">
												<div class="col-sm-4 mt-3 pl-3">
													<canvas id="pieChart"
														style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
												</div>
												<div class="col-sm-8 mt-3 pl-3">
													<table
														class="table table-bordered table-striped regionWiseReportTable"
														id="regionWiseReportTable" border="1">

														<thead>
															<tr>
																<th scope="col" class="thHead text-bold ">Region
																	Name</th>
																<th scope="col" class="thHead text-bold ">Open
																	Alert Count</th>
																<th scope="col" class="thHead text-bold">Close
																	Alert Count</th>
																<th scope="col" class="thHead text-bold">Pending
																	For Verification</th>
																<th scope="col" class="thHead text-bold">Total
																	Alert Count</th>

															</tr>
														</thead>
														<tbody id="regionWiseCountBody">

														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>

									<div class="card card-info card-outline mt-3" id="branchTable"
										th:if="${regionalFlg eq true}">
										<div class="card-header text-sm">
											<h3 class="card-title">
												Region Name - <span th:text="${zoneCount.regionId}"
													id="regionId2"></span>
											</h3>
										</div>
										<div class="card-body">

											<!-- New date added -->

											<div class="row">
												<div class="col-sm-2"></div>
												<div class="col-sm-5 mt-2 ">
													<div class="form-group row">
														<label class="col-12">Select Date Range For Search
															<code>*</code>
														</label>
														<!-- Date range
															/.form group -->
														<div class="input-group date" data-target-input="nearest">
															<input type="text"
																class="form-control col-6 datetimepicker-input"
																placeholder="Start Date" name="startDate" id="startDate"
																data-target="#startDate" onkeydown="return false" />
															<div class="input-group-append" data-target="#startDate"
																data-toggle="datetimepicker">
																<div class="input-group-text">
																	<em class="far fa-calendar-alt"></em>
																</div>
															</div>
															&nbsp;&nbsp;&nbsp; <input type="text"
																class="form-control col-6 datetimepicker-input"
																placeholder="End Date" name="endDate" id="endDate"
																data-target="#endDate" onkeydown="return false" />
															<div class="input-group-append" data-target="#endDate"
																data-toggle="datetimepicker">
																<div class="input-group-text">
																	<em class="far fa-calendar-alt"></em>
																</div>

															</div>


														</div>
													</div>
												</div>
												<div class="col-sm-2 mt-3" th:if="${auditFlg eq true}">
													<button type="button" id="fetchDataBtn"
														class="btn btn-block btn-sm btn-outline-primary mt-4 fetchDataBtn"
														name="fetchDataBtn">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-3" th:if="${zonalFlg eq true}">
													<button type="button" id="fetchDataBtnReg"
														class="btn btn-block btn-sm btn-outline-primary mt-4 fetchDataBtnReg"
														name="fetchDataBtnReg">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-3" th:if="${regionalFlg eq true}">
													<button type="button" id="fetchDataBtnBranch"
														class="btn btn-block btn-sm btn-outline-primary mt-4 fetchDataBtnBranch"
														name="fetchDataBtnBranch">Fetch Report</button>
												</div>
												<div class="col-sm-2 mt-3" th:if="${branchFlg eq true}">
													<button type="button" id="fetchDataBtnRule"
														class="btn btn-block btn-sm btn-outline-primary mt-4 fetchDataBtnRule"
														name="fetchDataBtnRule">Fetch Report</button>
												</div>
											</div>
											<hr>

											<!-- New date added -->

											<div class="row">
												<div class="col-sm-12 mt-3">
													<canvas id="visitors-chart2" class="canvas" height="350"></canvas>
												</div>
												<div class="col-sm-12 mt-3">

													<div class="card">
														<div class="card-body table-responsive">
															<div class="row">
																<div class="col-sm-7">
																	<table
																		class="table  table-bordered table-striped branchWiseReportTable"
																		id="branchWiseReportTable" border="1">
																		<caption></caption>
																		<thead>
																			<tr>
																			<tr>
																				<th scope="col" class="thHead text-bold ">Branch</th>
																				<th scope="col" class="thHead text-bold ">Open</th>
																				<th scope="col" class="thHead text-bold ">Close</th>
																				<th scope="col" class="thHead text-bold ">Pending
																					For Verification</th>
																				<th scope="col" class="thHead text-bold ">Total</th>
																		</thead>
																		<tbody id="branchWiseCountBody">


																			<tr
																				th:each="zoneAlertCount:${zoneCount.branchAlertCountList}">
																				<td class="text-bold text-blue "
																					th:name="regionName"><a href="#"
																					class="badge badge-primary branchWiseAlertView"
																					th:id="'branchId-'+${zoneAlertCount.branchId}"
																					th:text="${zoneAlertCount.branchId+'-'+zoneAlertCount.branchName}">
																				</a></td>
																				<!-- 	<td th:text="${zoneAlertCount.branchName}"
																				class="text-bold"></td> -->
																				<td th:text="${zoneAlertCount.openCount}"
																					class="text-red text-bold"></td>
																				<td th:text="${zoneAlertCount.closeCount}"
																					class="text-green text-bold"></td>
																				<td th:text="${zoneAlertCount.escalateCount}"
																					class="text-yellow text-bold"></td>
																				<td
																					class="text-center text-bold text-blue ruleAlertCount"
																					th:id="'branchId-'+${zoneAlertCount.branchId}"
																					th:name="regionName"><a href="#"
																					class="badge badge-primary"
																					th:text="${zoneAlertCount.totalCount}"> </a></td>
																			</tr>
																		</tbody>
																	</table>
																</div>
																<div class="col-sm-5">


																	<div class="col-sm-12"
																		style="padding: 50px 50px 0px 0px !important;">

																		<canvas id="pieChartRisk"
																			style="min-height: 200px; height: 200px; max-height: 200px; max-width: 100%;"></canvas>
																		<span class="text-bold"
																			style="padding: 10px 0px 0px 0px !important;">Risk-Wise
																			Graph</span>

																	</div>
																	<hr>
																	<div class="col-sm-12"
																		style="padding: 50px 0px 0px 10px !important;">

																		<canvas id="pieChartClassification"
																			style="min-height: 200px; height: 200px; max-height: 200px; max-width: 100%;"></canvas>
																		<span class="text-bold"
																			style="padding: 10px 0px 0px 0px !important; text-align: center;">Classification-Wise
																			Graph</span>

																	</div>

																</div>
															</div>

														</div>
													</div>
												</div>
											</div>
											<div class="row"></div>
										</div>
									</div>

									<div class="card card-info card-outline mt-3" id="branchTable"
										style="display: none">
										<div class="card-header text-sm">
											<h3 class="card-title">
												Region Name - <span id="regionId"></span>
											</h3>
										</div>
										<div class="card-body">
											<div class="row">
												<div class="col-sm-12 mt-3 pl-3">
													<table
														class="table table-bordered table-striped branchWiseReportTable"
														id="branchWiseReportTable" border="1">
														<caption></caption>
														<thead>
															<tr>
																<th scope="col" class="thHead text-bold ">Branch</th>
																<th scope="col" class="thHead text-bold ">Open</th>
																<th scope="col" class="thHead text-bold ">Close</th>
																<th scope="col" class="thHead text-bold ">Pending
																	For Verification</th>
																<th scope="col" class="thHead text-bold ">Total</th>
															</tr>
														</thead>
														<tbody id="branchWiseCountBody">

														</tbody>
													</table>
												</div>
											</div>

										</div>

									</div>


									<div class="card card-info card-outline mt-3" id="ruleTable"
										th:if="${ruleFlg eq true}">
										<div class="card-header text-sm">
											<h3 class="card-title">
												Branch ID - <span id="branchId2"
													th:text="${zoneCount.branchId}"></span>
											</h3>
										</div>
										<div class="card-body">
											<div class="row">
												<div class="col-sm-12 mt-3 pl-3 table-responsive">
													<table
														class="table table-bordered table-striped ruleWiseReportTable "
														id="ruleWiseReportTable" border="1">
														<caption></caption>
														<thead>
															<tr>
																<th scope="col" class="thHead text-bold "
																	style="width: 5%;">Rule ID</th>
																<th scope="col" class="thHead text-bold "
																	style="width: 55%;">Rule Description</th>
																<th scope="col" class="thHead text-bold "
																	style="width: 10%;">Open</th>
																<th scope="col" class="thHead text-bold "
																	style="width: 10%;">Close</th>
																<th scope="col" class="thHead text-bold "
																	style="width: 10%;">Verification</th>
																<th scope="col" class="thHead text-bold text-white"
																	style="width: 10%;">Total</th>

															</tr>
														</thead>
														<tbody id="ruleWiseCountBody">
															<tr
																th:each="zoneAlertCount:${zoneCount.branchAlertCountList}">
																<td th:text="${zoneAlertCount.ruleId}"></td>
																<td th:text="${zoneAlertCount.ruleDesc}"></td>
																<td th:text="${zoneAlertCount.openCount}"
																	class="text-red"></td>
																<td th:text="${zoneAlertCount.closeCount}"
																	class="text-green"></td>
																<td th:text="${zoneAlertCount.escalateCount}"
																	class="text-yellow"></td>
																<td
																	class="text-center text-bold text-blue accountAlertCount"
																	th:id="'ruleId-'+${zoneAlertCount.ruleId}"
																	th:ruleDesc="${zoneAlertCount.ruleDesc}"
																	th:name="ruleId"><a href="#"
																	th:text="${zoneAlertCount.totalCount}"
																	class="badge badge-primary"> </a></td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
									<div class="card card-info card-outline mt-3" id="ruleTable"
										style="display: none">
										<div class="card-header text-sm">
											<h3 class="card-title">
												Branch ID - <span id="branchId"></span>
											</h3>
										</div>
										<div class="card-body">
											<div class="row">
												<div class="col-sm-12 mt-3 pl-3 table-responsive">
													<table
														class="table table-bordered table-striped ruleWiseReportTable "
														id="ruleWiseReportTable" border="1">

														<thead>
															<tr>
																<th scope="col" class="thHead text-bold ">Rule ID</th>
																<th scope="col" class="thHead text-bold ">Rule
																	Description</th>
																<th scope="col" class="thHead text-bold ">Rule
																	Classification</th>
																<th scope="col" class="thHead text-bold ">Rule
																	Severity</th>
																<th scope="col" class="thHead text-bold ">Open</th>
																<th scope="col" class="thHead text-bold ">Close</th>
																<th scope="col" class="thHead text-bold ">Pending
																	For Verification</th>
																<th scope="col" class="thHead text-bold ">Total</th>

															</tr>
														</thead>
														<tbody id="ruleWiseCountBody">

														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
									<div class="card card-info card-outline mt-3" id="accountTable"
										style="display: none">
										<div class="card-header text-sm">
											<h3 class="card-title">
												Rule ID - <span id="ruleId"></span>
											</h3>
										</div>
										<div class="card-body">
											<div class="row">
												<div class="col-sm-12 mt-3 pl-3 table-responsive">
													<table
														class="table table-bordered table-striped accountWiseReportTable "
														id="accountWiseReportTable" border="1">

														<thead>
															<tr>
																<th scope="col" class="thHead text-bold ">Alert ID</th>
																<th scope="col" class="thHead text-bold ">Account
																	No</th>
																<th scope="col" class="thHead text-bold ">Customer
																	ID</th>
																<th scope="col" class="thHead text-bold ">Customer
																	Name</th>
																<th scope="col" class="thHead text-bold ">Alert
																	Status</th>
																<th scope="col" class="thHead text-bold ">Alert
																	Category</th>
																<th scope="col" class="thHead text-bold ">Generated
																	Date</th>
																<th scope="col" class="thHead text-bold ">Recurrence
																	Count</th>
															</tr>
														</thead>
														<tbody id="accountWiseCountBody">

														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>




								</div>
							</div>
							<!-- /.col -->
							<!-- fix for small devices only -->
							<div class="clearfix hidden-md-up"></div>

						</div>
						<!-- /.row -->
					</div>
				</div>
			</div>

		</div>

	</div>

	<form id="frmAlertReport" method="post">
		<input type="hidden" th:feild="*{encryptedJson}" id="encryptedJson"
			name="encryptedJson" /> <input type="hidden" id="trendList"
			name="trendList" th:value="${zoneCountList}" /> <input type="hidden"
			th:if="${regionCountList}" id="regionList" name="regionList"
			th:value="${regionCountList}" /><input type="hidden" id="roleIdName"
			name="roleIdName" th:value="${user.userPosition}" />
	</form>
	<form autocomplete="off" role="form" method="post"
		th:action="@{/roleAction}" id="newRoleForm">
		<input type="hidden" id="encryptedJsonDashboard" name="encryptedJson" />
	</form>


	<!-- VIEW ALERT MODAL -->
	<div class="modal fade" id="viewAlertmodal">
		<div class=" modal-dialog modal-xl">
			<div class=" card modal-content">
				<div class="modal-header bg-info">
					<h3 class="modal-title text-white">Alert Details</h3>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body p-1 m-1">

					<div class="card card-tabs card-info card-outline m-2 p-2">

						<div class="card-header p-2 border-bottom-0">
							<ul class="nav nav-tabs">
								<li class="nav-item"><a
									class="nav-link card-title text-blue text-bold active"
									href="#alertDetailstab" id="alertDetailstablink"
									data-toggle="tab"> <em class="fa fa-tasks mr-1 mt-2"></em>Alert
										Details
								</a></li>
							</ul>
						</div>
						<div class="tab-content">

							<div class="active tab-pane" id="alertDetailstab">
								<div class="row mt-2">
									<div class="col-sm-4">
										<div class="form-group">
											<label for="alertIdM">Alert ID</label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="alertIdM" name="alertIdM" readonly>
											</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<label for="alertStatus">Alert Status</label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="alertStatus" name="alertStatus" readonly>
											</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<label for="custAcid">Customer ACID</label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="custAcid" name="custAcid" readonly>
											</div>
										</div>
									</div>
								</div>

								<div class="row">

									<div class="col-sm-4">
										<div class="form-group">
											<label for="ruleId">Rule Id</label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold" id="ruleIdM"
													name="ruleId" readonly>
											</div>
										</div>
									</div>

									<div class="col-sm-4">
										<div class="form-group">
											<label for="ruleRisk">Rule Priority</label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="ruleRiskM" name="ruleRisk" readonly>
											</div>
										</div>
									</div>

								</div>

								<div class="row">
									<div class="col-sm-12">
										<div class="form-group">
											<label for="ruleDescM">Rule Description </label>
											<textarea class="form-control form-control-sm"
												name="ruleDescM" id="ruleDescM" rows="2" maxlength="3000"
												placeholder="Rule Description" disabled></textarea>
										</div>
									</div>

								</div>


								<div class="row">



									<div class="col-sm-4">
										<div class="form-group">
											<label for="custId">Customer Id</label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold" id="custId"
													name="custId" readonly>
											</div>
										</div>
									</div>


									<div class="col-sm-4">
										<div class="form-group">
											<label for="branchId">Branch Id</label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="branchIdM" name="branchId" readonly>
											</div>
										</div>
									</div>


								</div>

								<div class="row">
									<div class="col-sm-4">
										<div class="form-group">
											<label for="region">Region </label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold" id="region"
													name="region" readonly>
											</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<label for="zone">Zone </label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold" id="zone"
													name="zone" readonly>
											</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<label for="generatedTime">Generated Time </label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="generatedTime" name="generatedTime" readonly>
											</div>
										</div>
									</div>

								</div>

								<div class="row">

									<div class="col-sm-4">
										<div class="form-group">
											<label for="custVertical">Customer Vertical </label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="custVertical" name="custVertical" readonly>
											</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<label for="actRoleId">Act Role Id </label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="actRoleId" name="actRoleId" readonly>
											</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-group">
											<label for="ruleClassification">Rule Classification </label>
											<div class="input-group">
												<input type="text"
													class="form-control form-control-sm text-bold"
													id="ruleClassification" name="ruleClassification" readonly>
											</div>
										</div>
									</div>

								</div>


								<div class="row" id='alertCatTable'>
									<div class="col-sm-12">
										<div class="card-body  table-responsive">
											<table id="alrtcatTblM"
												class="table table-head-fixed table-bordered table-striped alrtcatTblM">

												<tbody class="aBody" id="aBody">


												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>


				</div>
				<div class="modal-footer">
					<button class="btn btn-secondary" data-dismiss="modal">
						<em class="fa fa-arrow-circle-left fa-1x">&nbsp;</em> Back
					</button>
				</div>
			</div>
		</div>
	</div>
	<!-- VIEW ALERT MODAL -->



	<div th:if="${#authentication.principal.ntf15Days}">
		<div class="beforefooter">
			<h6>
				&nbsp;
				<svg xmlns="http://www.w3.org/2000/svg" class="admonition-icon"
					width="15" height="15" viewBox="0 0 18 18">
        <path
						d="M0 9c0-5 4-9 9-9s9 4 9 9-4 9-9 9-9-4-9-9zm8-1v5c0 .6.4 1 1 1s1-.4 1-1V8c0-.6-.4-1-1-1s-1 .4-1 1zm1-2c.6 0 1-.4 1-1s-.4-1-1-1-1 .4-1 1 .4 1 1 1z"
						fill="#0052CC" fill-rule="evenodd"> </path>
    </svg>
				&nbsp;&nbsp;<span sec:authentication="principal.ntf15Days"></span>&nbsp;&nbsp;
			</h6>
		</div>
	</div>

	<footer class="loginfooter">
		<div class="col-md-4" style="padding: 6px 0 0 10px;">© 2022-2023
			All rights reserved.</div>
		<div class="col-md-4"
			style="float: left; text-align: center; padding: 6px 0 0 10px;">
			&nbsp;<img class="img-fluid" src="/oms-web/dist/img/flag.png"
				alt="Proudly Made In India" width="" height=""> &nbsp; Proudly
			Made In India
		</div>
		<div class="float-right col-md-4">
			Designed &amp; Developed by <img class="img-fluid"
				src="/oms-web/dist/img/intech-logo.png" alt="Photo" width="100"
				height="100">
		</div>
	</footer>


	<!-- /.login-box -->
	<!-- Crypto JS JavaScript -->
	<script th:src="@{/plugins/jquery/jquery.min.js}"></script>
	<!-- Bootstrap -->
	<script th:src="@{/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
	<!-- jquery-validation -->
	<script th:src="@{/plugins/jquery-validation/jquery.validate.min.js}"></script>
	<script
		th:src="@{/plugins/jquery-validation/additional-methods.min.js}"></script>
	<script th:src="@{/plugins/moment/moment.min.js}"></script>
	<!-- date-range-picker -->
	<script th:src="@{/plugins/daterangepicker/daterangepicker.js}"></script>
	<!-- Tempusdominus Bootstrap 4 -->
	<script
		th:src="@{/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js}"></script>
	<!-- bs-custom-file-input -->
	<script
		th:src="@{/plugins/bs-custom-file-input/bs-custom-file-input.min.js}"></script>
	<!-- Select2 -->
	<script th:src="@{/plugins/select2/js/select2.full.min.js}"></script>
	<!-- Toastr -->
	<script th:src="@{/plugins/toastr/toastr.min.js}"></script>
	<!-- overlayScrollbars -->
	<script
		th:src="@{/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js}"></script>
	<!-- DataTables  & Plugins -->
	<script th:src="@{/plugins/datatables/jquery.dataTables.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-responsive/js/dataTables.responsive.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-responsive/js/responsive.bootstrap4.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-buttons/js/dataTables.buttons.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-buttons/js/buttons.bootstrap4.min.js}"></script>
	<script th:src="@{/plugins/jszip/jszip.min.js}"></script>
	<script th:src="@{/plugins/pdfmake/pdfmake.min.js}"></script>
	<script th:src="@{/plugins/pdfmake/vfs_fonts.js}"></script>
	<script th:src="@{/plugins/datatables-buttons/js/buttons.html5.min.js}"></script>
	<script th:src="@{/plugins/datatables-buttons/js/buttons.print.min.js}"></script>
	<!-- Crypto JS JavaScript -->
	<!-- Crypto JS JavaScript -->
	<script th:src="@{/dist/appjs/aes.js}"></script>
	<script th:src="@{/dist/appjs/pbkdf2.js}"></script>
	<script th:src="@{/dist/appjs/AESUtil.js}"></script>
	<script th:src="@{/dist/appjs/app.js}"></script>
	<script th:src="@{/dist/appjs/erm/header.js}"></script>

	<!-- ChartJS -->
	<script th:src="@{/plugins/chart.js/Chart.min.js}"></script>
	<!-- uPlot -->
	<script th:src="@{/plugins/uplot/uPlot.iife.min.js}"></script>
	<script th:src="@{/dist/appjs/erm/VgoDashboard.js}"></script>

	<!-- Developer Added JS -->
	<script th:src="@{/dist/appjs/erm/home.js}"></script>
	<script th:src="@{/dist/appjs/erm/viewmodal.js}"></script>
	<!-- Developer Added Print JS -->
	<script th:src="@{/dist/appjs/erm/jspdf.min.js}"></script>
	<script>
		$("#logbtn")
				.click(
						function() {
							username = $("#userName").val();
							passwd = $("#pass").val();

							var iterationCount = 1000;
							var keySize = 128;

							//passPhrase is the key
							var passphrase = CryptoJS.lib.WordArray.random(
									128 / 8).toString(CryptoJS.enc.Hex);
							var aesUtil = new AesUtil(keySize, iterationCount);
							var ciphertext = aesUtil.encrypt(
									reverseText(passphrase), username);
							var ciphertextpassword = aesUtil.encrypt(
									reverseText(passphrase), passwd);
							$("#username").val(ciphertext);
							$("#password").val(
									ciphertextpassword + ':~:' + passphrase);

							$("#loginForm").submit();

						});

		$("#userName").keyup(function(e) {
			var str = $(this).val();
			$("#userName").val(str.toUpperCase());
		})
		//loader
		document.onreadystatechange = function() {
			var state = document.readyState
			if (state == 'interactive') {
				//document.getElementById('contents').style.visibility = "hidden";
			} else if (state == 'complete') {
				setTimeout(
						function() {
							document.getElementById('interactive');
							document.getElementById('load').style.visibility = "hidden";
							//document.getElementById('contents').style.visibility = "visible";
						}, 1000);
			}
		}
		$(".roleNameDiv")
				.click(
						function() {

							document.getElementById('load').style.visibility = "visible";
							var roleName = $(this).attr('id').split("~")[0];
							var moduleCode = $(this).attr('id').split("~")[1];
							sessionStorage.setItem('rolename', roleName);
							sessionStorage.setItem('moduleCode', moduleCode);

							var pageValJson = "{\"roleName\":\"" + roleName
									+ "\",\n" + "\"moduleCode\":\""
									+ moduleCode + "\"}";
							var iterationCount = 1000;
							var keySize = 128;
							//passPhrase is the key
							var passphrase = CryptoJS.lib.WordArray.random(
									128 / 8).toString(CryptoJS.enc.Hex);

							var aesUtil = new AesUtil(keySize, iterationCount);

							var ciphertext = aesUtil.encrypt(
									reverseText(passphrase), pageValJson);

							$("#encryptedJson").val(
									ciphertext + ':~:' + passphrase);
							$("#roleForm").submit();

						});
		$(".TMroleNameDiv")
				.click(
						function() {

							var roleName = $(this).attr('id').split("-")[1];
							var type = $(this).attr('id').split("-")[2];
							var vertical = $(this).attr('id').split("-")[0];
							var period = $(this).attr('id').split("-")[3];

							if (roleName != 'null') {
								document.getElementById('load').style.visibility = "visible";
								var moduleCode = '';
								if (roleName === 'System Admin'
										|| roleName === 'HO Admin') {
									moduleCode = 'SA';
								} else {
									moduleCode = 'TM';
								}
								var searchFromDashboard = 'searchFrom';
								sessionStorage.setItem('rolename', roleName);
								sessionStorage
										.setItem('moduleCode', moduleCode);
								sessionStorage.setItem('searchFromDashboard',
										searchFromDashboard);
								sessionStorage.setItem('period', period);
								var pageValJson = "{\"roleName\":\"" + roleName
										+ "\",\n" + "\"moduleCode\":\""
										+ moduleCode + "\",\n"
										+ "\"vertical\":\"" + vertical
										+ "\",\n" + "\"searchValue\":\""
										+ period + "\",\n"
										+ "\"searchFromDashboard\":\""
										+ searchFromDashboard + "\"}";

								var iterationCount = 1000;
								var keySize = 128;
								//passPhrase is the key
								var passphrase = CryptoJS.lib.WordArray.random(
										128 / 8).toString(CryptoJS.enc.Hex);

								var aesUtil = new AesUtil(keySize,
										iterationCount);

								var ciphertext = aesUtil.encrypt(
										reverseText(passphrase), pageValJson);

								$("#encryptedJsonDashboard").val(
										ciphertext + ':~:' + passphrase);

								$("#newRoleForm").submit();
							} else {
								toastr
										.error("Access Not Available For This Position");
							}
						});
	</script>
</body>
<script>
	$(".roleList")
			.hover(
					function() {
						//$(this).parentsUntil("a").attr("href","#");
						$(this)
								.parent()
								.wrapInner(
										'<a href="#" style="text-decoration:none !important;"/>');
						$(this).addClass("text-white active");

					}, function() {
						$("a#link").replaceWith($("a#link").text());
						$(this).removeClass("text-white active");
					});
</script>
<script>
	$(document).ready(function() {
		if ($("#auditFlg").val() == false) {
			var message = $('#message').val();
			if (message != "") {
				toastr.success(message);
			}
		}
		$('.select2').select2();

		bsCustomFileInput.init();
	});
</script>
<script>
	$("#submitBtnSwitchOfc2")
			.click(

					function(e) {

						if ($('#switchOfcFrm').valid()) {
							document.getElementById('load').style.visibility = "visible";
							//Check table data

							var apString = "{\"officeType\":\""
									+ $("#officeTypeSwitchOffice").val()
									+ "\",\n" + "\"officeCode\":\""
									+ $("#officeCodeSo").val() + "\",\n"
									+ "\"roleName\":\""
									+ $("#roleNameSo").val() + "\",\n"
									+ "\"department\":\""
									+ $("#departmentSo").val() + "\"}"

							//var apString=""

							var iterationCount = 1000;
							var keySize = 128;
							//passPhrase is the key
							var passphrase = CryptoJS.lib.WordArray.random(
									128 / 8).toString(CryptoJS.enc.Hex);

							var aesUtil = new AesUtil(keySize, iterationCount);

							var ciphertext = aesUtil.encrypt(
									reverseText(passphrase), apString);

							$("#encryptedJsonModel").val(
									ciphertext + ':~:' + passphrase);

							$("#switchOfcFrm").submit();

						}
					});
	jQuery(document)
			.ready(
					function() {
						$(function() {
							$('#switchOfcFrm')
									.validate(
											{
												rules : {

													departmentSo : {
														required : true,
													},
													officeTypeSwitchOffice : {
														required : true,

													},
													officeCodeSo : {
														required : true,
													},

													roleNameSo : {
														required : true,
													},

												},

												messages : {

													departmentSo : {
														required : "Please Select Department"
													},

													officeTypeSwitchOffice : {
														required : "Please Select Office Type"
													},

													officeCodeSo : {
														required : "Please Select Office Code"
													},
													roleNameSo : {
														required : "Please Select Role Name"
													},

												},
												errorElement : 'span',
												errorPlacement : function(
														error, element) {
													error
															.addClass('invalid-feedback');
													element.closest(
															'.form-group')
															.append(error);
												},
												highlight : function(element,
														errorClass, validClass) {
													$(element).addClass(
															'is-invalid');
												},
												unhighlight : function(element,
														errorClass, validClass) {
													$(element).removeClass(
															'is-invalid');
												},
												submitHandler : function(form) {

													document
															.getElementById('load').style.visibility = "visible";
													form.submit();

												}
											});
						});
					});
</script>

<script>
	$(".closeCount")
			.click(
					function() {

						document.getElementById('load').style.visibility = "visible";
						var custVertical = $(this).attr('id');
						var pageValJson = "{\"custVertical\":\"" + custVertical
								+ "\"}";
						var iterationCount = 1000;
						var keySize = 128;
						//passPhrase is the key
						var passphrase = CryptoJS.lib.WordArray.random(128 / 8)
								.toString(CryptoJS.enc.Hex);

						var aesUtil = new AesUtil(keySize, iterationCount);

						var ciphertext = aesUtil.encrypt(
								reverseText(passphrase), pageValJson);

						$("#encryptedJsonEdit").val(
								ciphertext + ':~:' + passphrase);
						$("#closeCountForm").submit();

					});
</script>

<script type="text/javascript">
	$(document).ready(function() {
		$('#startDate').datetimepicker({
			closeOnDateSelect : false,
			closeOnTimeSelect : false,
			maxDate : new Date(),
			format : 'DD/MM/yyyy',
			onChangeDateTime : function(dp, $input) {
			}
		});
		$('#endDate').datetimepicker({
			closeOnDateSelect : false,
			closeOnTimeSelect : false,
			maxDate : new Date(),
			format : 'DD/MM/yyyy',
			onChangeDateTime : function(dp, $input) {
			}
		});
	});

	$("#zoneWiseReportTable").DataTable({
		"columnDefs" : [ {
			orderable : false
		} ],
		"responsive" : false,
		"autoWidth" : true,
		"searching" : false,
		"paging" : false,
		"lengthChange" : false,
		"fixedHeader" : true,
		"bPaginate" : false,
		"bLengthChange" : false,
		"bFilter" : true,
		"bInfo" : false,
		"bAutoWidth" : false,
		"language" : {
			"emptyTable" : "No Data Available"
		},
	}).buttons().container().appendTo(
			'#zoneWiseReportTable_wrapper .col-md-6:eq(0)');

	$(document).on(
			"click",
			"a.branchWiseAlertView",
			function() {
				//document.getElementById('load').style.visibility = "visible";
				var roleName = $("#roleIdName").val();
				//var officeType = $("#officeType").val();

				//alert(officeType)
				if (roleName === 'System Admin' || roleName === 'HO Admin') {
					roleName = 'ROM Officer';
					moduleCode = 'TM';
				} else {
					moduleCode = 'TM';
				}
				var zoneName = $(this).attr('id');
				var zoneNameList = zoneName.split('-');
				var searchFromDashboard = "searchFromDashboard";

				sessionStorage.setItem('rolename', roleName);
				sessionStorage.setItem('moduleCode', moduleCode);
				sessionStorage.setItem('branchId', zoneNameList[1]);
				var vertical = 'ROM Officer';
				var pageValJson = "{\"roleName\":\"" + roleName + "\",\n"
						+ "\"branchId\":\"" + zoneNameList[1] + "\",\n"
						+ "\"vertical\":\"" + vertical + "\",\n"
						+ "\"searchFromDashboard\":\"" + searchFromDashboard
						+ "\",\n" + "\"moduleCode\":\"" + moduleCode + "\"}";
				console.log(pageValJson);
				var iterationCount = 1000;
				var keySize = 128;
				//passPhrase is the key
				var passphrase = CryptoJS.lib.WordArray.random(128 / 8)
						.toString(CryptoJS.enc.Hex);

				var aesUtil = new AesUtil(keySize, iterationCount);

				var ciphertext = aesUtil.encrypt(reverseText(passphrase),
						pageValJson);

				$("#encryptedJsonDashboard").val(
						ciphertext + ':~:' + passphrase);
				$("#newRoleForm").submit();

			});
</script>

<script type="text/javascript">
	$(function() {

		var currentdate = new Date();
		var datetime = +currentdate.getDate() + "/"
				+ (currentdate.getMonth() + 1) + "/"
				+ currentdate.getFullYear() + "_" + currentdate.getHours()
				+ ":" + currentdate.getMinutes() + ":"
				+ currentdate.getSeconds();

		$("#roleValueTable").DataTable({
			"columnDefs" : [ {
				orderable : false
			} ],
			"order" : [ 0, "desc" ],
			"responsive" : false,
			"lengthMenu" : [ 2, 5, 10, 20 ],
			"autoWidth" : true,
			"searching" : false,
			"fixedHeader" : true,

			"language" : {
				"emptyTable" : "No Data Available"
			},

		}).buttons().container().appendTo(
				'#roleValueTable_wrapper .col-md-6:eq(0)');
	});

	var backgroundClr = [ '#ffd700', '#0a0', '#1b458b', '#08f', '#f80', '#a04',
			'#a52a2a' ];

	var list2 = [];
	//var list2 = [];
	$(document).ready(function() {

		list2 = $('#piChartData').val();
		console.log("list " + list2);
		list2 = list2.replace('[', '');
		list2 = list2.replace(']', '');
		var itemsArr = list2.split(",");
		checkLableArr = [];
		dataCountArr = [];
		var bgColr = [];
		/*itemsArr.forEach(function(items) {
			checkLableArr.push(itemsArr[0]);
				dataCountArr.push(itemsArr[1]);
			}*/
		for ( var itr in itemsArr) {

			var iteArr = itemsArr[itr].split("~");
			checkLableArr.push(iteArr[0]);
			dataCountArr.push(iteArr[1]);
			bgColr.push(backgroundClr[itr]);
		}

		var donutData = {

			labels : checkLableArr,

			datasets : [ {

				data : dataCountArr,
				backgroundColor : bgColr

			} ]
		}
		var pieChartCanvas = $('#pieChart3').get(0).getContext('2d')
		var pieData = donutData;
		var pieOptions = {
			maintainAspectRatio : true,
			responsive : true,
			legend : {
				position : "right",
				text : "This is example",
				fontSize : 15,
				labels : {
					usePointStyle : true,
				}
			},
			scales : {

				xAxes : [ {
					display : false,
					gridLines : {
						display : false
					},
					scaleLabel : {
						display : true,
						labelString : 'Vertical wise total Count'
					},
					ticks : ticksStyle
				} ]
			}

		}
		//Create pie or douhnut chart
		// You can switch between pie and douhnut using the method below.
		new Chart(pieChartCanvas, {
			type : 'pie',
			data : pieData,
			options : pieOptions
		})
		var scrollPos = $("#varticalPiChart").offset.top;
		$(window).scrollTop(scrollPos);
	});
</script>

<script>
	/*FETCH BUTTON CLICK FUNCTION*/
	var list = [];
	var zoneList = [];
	var qList = [];
	var data = [];
	var $visitorsChart = $('#visitors-chart2')
	var ticksStyle = {
		fontColor : '#495057',
		fontStyle : 'bold'
	}
	// eslint-disable-next-line no-unused-vars
	var open = [];
	var close = [];
	var escalate = [];
	var mode = 'index'
	var intersect = true
	$(document).ready(function() {

		list = $('#branchPieList').val();
		var temp = $('#branchPieList').val();
		if (temp != '') {
			list = list.replace('[', '');
			list = list.replace(']', '');
			qList = list.split(',');
			console.log(qList);
			$.each(qList, function(index, value) {
				data = value.split('~');
				zoneList.push(data[0]);
				open.push(data[1]);
				close.push(data[3]);
				escalate.push(data[2]);
			})
			var visitorsChart = new Chart($visitorsChart, {
				data : {
					labels : zoneList,
					datasets : [ {
						type : 'line',
						label : 'open',
						data : open,
						backgroundColor : 'transparent',
						borderColor : '#FF0000',
						pointBorderColor : '#FF0000',
						pointBackgroundColor : '#FF0000',
						fill : false
					// pointHoverBackgroundColor: '#007bff',
					// pointHoverBorderColor : '#007bff'
					}, {
						type : 'line',
						label : 'close',
						data : close,
						backgroundColor : 'tansparent',
						borderColor : '#28A745',
						pointBorderColor : '#28A745',
						pointBackgroundColor : '#28A745',
						fill : false
					// pointHoverBackgroundColor: '#ced4da',
					// pointHoverBorderColor : '#ced4da'
					}, {
						type : 'line',
						label : 'Pending For Verification',
						data : escalate,
						backgroundColor : 'tansparent',
						borderColor : '#FFBF00',
						pointBorderColor : '#FFBF00',
						pointBackgroundColor : '#FFBF00',
						fill : false
					// pointHoverBackgroundColor: '#ced4da',
					// pointHoverBorderColor : '#ced4da'
					} ]
				},
				options : {
					maintainAspectRatio : false,
					tooltips : {
						mode : mode,
						intersect : intersect
					},
					hover : {
						mode : mode,
						intersect : intersect
					},
					legend : {
						display : true
					},
					scales : {
						yAxes : [ {
							// display: false,
							scaleMinSpace : 100,
							gridLines : {
								display : true,
								lineWidth : '4px',
								color : 'rgba(0, 0, 0, .2)',
								zeroLineColor : 'transparent'
							},
							scaleLabel : {
								display : true,
								labelString : 'Numbers Of Alerts'
							},
							ticks : $.extend({
								beginAtZero : true,

							}, ticksStyle)
						} ],
						xAxes : [ {
							display : true,
							gridLines : {
								display : true
							},
							scaleLabel : {
								display : true,
								labelString : 'Branch Wise Counts'
							},
							ticks : ticksStyle
						} ]
					}
				}
			})

		}
	});

	/* regionWiseReportTable */
</script>

<script>
	$(function() {

		var currentdate = new Date();
		var datetime = +currentdate.getDate() + "/"
				+ (currentdate.getMonth() + 1) + "/"
				+ currentdate.getFullYear() + "_" + currentdate.getHours()
				+ ":" + currentdate.getMinutes() + ":"
				+ currentdate.getSeconds();
		$("#regionWiseReportTable").DataTable({
			"columnDefs" : [ {
				orderable : false
			} ],
			"order" : [ 0, "desc" ],
			"responsive" : false,
			"lengthMenu" : [ 5, 10, 20 ],
			"autoWidth" : true,
			"searching" : false,
			"fixedHeader" : true,

			"language" : {
				"emptyTable" : "No Data Available"
			},
			"buttons" : [ {

				extend : 'excel',
				title : 'VerticalWiseCount_' + datetime,

			}, {

				extend : 'pdfHtml5',
				title : 'VerticalWiseCount_' + datetime,

			} ]
		}).buttons().container().appendTo(
				'#regionWiseReportTable_wrapper .col-md-6:eq(0)');
	});
</script>

<script>
	var list2 = [];
	//var list2 = [];
	$(document).ready(function() {

		list2 = $('#newPriorityList').val();
		list2 = list2.replace('[', '');
		list2 = list2.replace(']', '');
		var itemsArr = list2.split(",");
		checkLableArr = [];
		dataCountArr = [];
		var bgColr = [];
		for ( var itr in itemsArr) {

			var iteArr = itemsArr[itr].split("~");
			checkLableArr.push(iteArr[0]);
			dataCountArr.push(iteArr[1]);

			if (iteArr[0] === 'High') {
				bgColr.push("red");
			} else if (iteArr[0] === 'Low') {
				bgColr.push("green");
			} else if (iteArr[0] === 'Medium') {
				bgColr.push("yellow");
			}

		}

		var donutData = {

			labels : checkLableArr,

			datasets : [ {

				data : dataCountArr,
				backgroundColor : bgColr

			} ]
		}
		var pieChartCanvas = $('#pieChartRisk').get(0).getContext('2d')
		var pieData = donutData;
		var pieOptions = {
			maintainAspectRatio : true,
			responsive : true,
			legend : {
				position : "right",
				text : "This is example",
				fontSize : 15,
				labels : {
					usePointStyle : true,
				}
			},
			scales : {

				xAxes : [ {
					display : false,
					gridLines : {
						display : false
					},
					scaleLabel : {
						display : true,
						labelString : 'Vertical wise total Count'
					},
					ticks : ticksStyle
				} ]
			}

		}
		//Create pie or douhnut chart
		// You can switch between pie and douhnut using the method below.
		new Chart(pieChartCanvas, {
			type : 'pie',
			data : pieData,
			options : pieOptions
		})
		/* var scrollPos = $("#varticalPiChart").offset.top;
		$(window).scrollTop(scrollPos); */
	});

	var list3 = [];
	$(document).ready(
			function() {

				list3 = $('#newClassificationGraphList').val();
				list3 = list3.replace('[', '');
				list3 = list3.replace(']', '');
				var itemsArr = list3.split(",");
				checkLableArr = [];
				dataCountArr = [];
				var bgColr = [];
				for ( var itr in itemsArr) {
					var iteArr = itemsArr[itr].split("~");

					checkLableArr.push(iteArr[0]);
					dataCountArr.push(iteArr[1]);
					bgColr.push(backgroundClr[itr]);
				}

				var donutData = {

					labels : checkLableArr,

					datasets : [ {

						data : dataCountArr,
						backgroundColor : bgColr

					} ]
				}
				var pieChartCanvas = $('#pieChartClassification').get(0)
						.getContext('2d')
				var pieData = donutData;
				var pieOptions = {
					maintainAspectRatio : true,
					responsive : true,
					legend : {
						position : "right",
						text : "This is example",
						fontSize : 15,
						labels : {
							usePointStyle : true,
						}
					},
					scales : {

						xAxes : [ {
							display : false,
							gridLines : {
								display : false
							},
							scaleLabel : {
								display : true,
								labelString : 'Vertical wise total Count'
							},
							ticks : ticksStyle
						} ]
					}

				}
				//Create pie or douhnut chart
				// You can switch between pie and douhnut using the method below.
				new Chart(pieChartCanvas, {
					type : 'pie',
					data : pieData,
					options : pieOptions
				})
				/* var scrollPos = $("#branchWiseReportTable").offset.top;
				$(window).scrollTop(scrollPos); */
			});
</script>
<script type="text/javascript">
	$(document)
			.on(
					"click",
					"#verticalBtnVigilance",
					function() {

						var startDate = $('#startDate').val();
						var endDate = $('#endDate').val();
						branchMonitoring = "VgdMonitoring";

						if (endDate === null || endDate === ''
								|| endDate === undefined) {
							if (startDate === null || startDate === ''
									|| startDate === undefined) {
								startDate = '';
								endDate = '';
							}
							startDate = '';
							endDate = '';
						}

						var pageValJson = "{\"startDate\": \"" + startDate
								+ "\",\n" + "    \"auditSearchParam\":\""
								+ branchMonitoring + "\",\n"
								+ "    \"endDate\":\"" + endDate + "\"\n" + "}";

						document.getElementById('load').style.visibility = "visible";
						var iterationCount = 1000;
						var keySize = 128;
						//passPhrase is the key
						var passphrase = CryptoJS.lib.WordArray.random(128 / 8)
								.toString(CryptoJS.enc.Hex);
						var aesUtil = new AesUtil(keySize, iterationCount);
						var ciphertext = aesUtil.encrypt(
								reverseText(passphrase), pageValJson);
						$("#encryptedJsonVigilance").val(
								ciphertext + ':~:' + passphrase);
						$("#vigilanceDashboard").submit();
					})
</script>

</body>
</html>